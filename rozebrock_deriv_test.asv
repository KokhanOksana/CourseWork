clear
count = 100; dim = 2;
a = -1.5; b = 1.5;
x0 = [2 2];
testFunc = Rozenbrock();

design = lhsdesign(count,dim);
x(1,:) = a + (b-a)* design(:,1); 
x(2,:) = a + (b-a)* design(:,2);
z = testFunc.Func(x);
derives = testFunc.Deriv(x);

ti = a:.05:b; 
[X(1,:),X(2,:)] = meshgrid(ti,ti);
FI = testFunc.Func(X);

subplot(1,3,1); mesh(XI,YI,FI); title('Real'); hold on;
[x_minr, f_x_minr,ex_flagr, outputr] = fmincon(rozen,[-1  2],[],[],[],[],[0 0],[1 1]);
%plot3(x_minr(1),x_minr(2),f_x_minr,'*b') ;hold on;

%RBF interpolation
    %varargin(1) - BaseFunctionName
    %varargin(2) - Constant
    %varargin(3) - Smooth
    %varargin(4) - DerivValues
rbf = RBF(x, z,'thinplate',0,0,derives);
ZI = rbf.Interpolate(X);
ZI = reshape(ZI, size(XI));

subplot(1,3,2); mesh(XI,YI,ZI), hold
plot3(x,y,z,'*r'), hold off; title('RBF interpolation'); hold on; 
subplot(1,3,3); mesh(XI,YI,abs(ZI - FI));  title('Error');

%figure;
%min_opt = optimset('TolX',1e-10);
%[x_minir, f_minir] = f_region_min(rozen,x0,25,[a a],[b b],min_opt)



